DROP TABLE IF EXISTS sales;
DROP TABLE IF EXISTS products;
DROP TABLE IF EXISTS customers;


CREATE TABLE customers (
    customer_id SERIAL PRIMARY KEY,
    customer_name VARCHAR(255) NOT NULL,
    city VARCHAR(100),
    registration_date DATE DEFAULT CURRENT_DATE
);


CREATE TABLE products (
    product_id SERIAL PRIMARY KEY,
    product_name VARCHAR(255) NOT NULL,
    category VARCHAR(100),
    price DECIMAL(10, 2) NOT NULL CHECK (price > 0)
);


CREATE TABLE sales (
    sale_id SERIAL PRIMARY KEY,
    product_id INT NOT NULL,
    customer_id INT NOT NULL,
    sale_date DATE NOT NULL,
    quantity INT NOT NULL CHECK (quantity > 0),
    total_amount DECIMAL(12, 2) NOT NULL,
    CONSTRAINT fk_product
        FOREIGN KEY(product_id)
        REFERENCES products(product_id)
        ON DELETE SET NULL,
    CONSTRAINT fk_customer
        FOREIGN KEY(customer_id)
        REFERENCES customers(customer_id)
        ON DELETE SET NULL
);


CREATE INDEX idx_sales_product_id ON sales(product_id);
CREATE INDEX idx_sales_customer_id ON sales(customer_id);
CREATE INDEX idx_sales_sale_date ON sales(sale_date);


-- 1. Inserting data for 10 customers
INSERT INTO customers (customer_name, city, registration_date) VALUES
('John Smith', 'New York', '2023-01-15'),
('Emily Johnson', 'Los Angeles', '2023-02-20'),
('Michael Williams', 'Chicago', '2023-03-10'),
('Jessica Brown', 'Houston', '2023-04-05'),
('David Jones', 'Phoenix', '2023-05-25'),
('Sarah Garcia', 'Philadelphia', '2023-06-30'),
('Daniel Miller', 'San Antonio', '2023-07-12'),
('Laura Davis', 'San Diego', '2023-08-18'),
('James Rodriguez', 'Dallas', '2023-09-22'),
('Linda Martinez', 'San Jose', '2023-10-30');

-- 2. Inserting data for 15 products
INSERT INTO products (product_name, category, price) VALUES
('Laptop "ProBook 15"', 'Electronics', 75000.00),
('Smartphone "Galaxy S25"', 'Electronics', 62000.00),
('Headphones "SoundPro"', 'Electronics', 8500.00),
('Coffee Machine "Espresso Deluxe"', 'Home Appliances', 25000.00),
('Book "Python Basics"', 'Books', 2100.00),
('Book "The Art of Programming"', 'Books', 3200.00),
('Smartwatch "FitWatch 5"', 'Electronics', 15000.00),
('Gaming Console "PlayBox X"', 'Electronics', 48000.00),
('Robot Vacuum "CleanBot Z1"', 'Home Appliances', 31000.00),
('Coffee "Arabica", 1kg', 'Groceries', 1500.00),
('Tea "Earl Grey", 100g', 'Groceries', 450.00),
('Armchair "Comfort"', 'Furniture', 18000.00),
('Table "Oakwood"', 'Furniture', 22000.00),
('Monitor "ViewSonic 27"', 'Electronics', 28500.00),
('Keyboard "Mechanical Pro"', 'Electronics', 9800.00);


-- 3. Inserting data for 200 sales
INSERT INTO sales (product_id, customer_id, sale_date, quantity, total_amount) VALUES
(1, 10, '2024-03-24', 3, 225000.00),
(15, 8, '2024-04-18', 2, 19600.00),
(14, 2, '2023-11-20', 3, 85500.00),
(5, 5, '2024-01-20', 2, 4200.00),
(10, 8, '2024-02-14', 1, 1500.00),
(12, 7, '2024-05-18', 5, 90000.00),
(2, 5, '2024-06-18', 3, 186000.00),
(14, 1, '2024-06-25', 1, 28500.00),
(8, 5, '2024-04-23', 5, 240000.00),
(12, 1, '2024-02-09', 5, 90000.00),
(11, 4, '2023-12-25', 5, 2250.00),
(11, 1, '2024-01-21', 4, 1800.00),
(7, 3, '2023-11-25', 1, 15000.00),
(14, 7, '2023-11-20', 1, 28500.00),
(14, 5, '2024-05-24', 2, 57000.00),
(10, 7, '2023-11-12', 3, 4500.00),
(4, 9, '2024-01-21', 3, 75000.00),
(7, 9, '2024-02-12', 2, 30000.00),
(8, 7, '2024-05-20', 1, 48000.00),
(15, 2, '2024-01-08', 5, 49000.00),
(10, 4, '2024-05-18', 3, 4500.00),
(14, 2, '2024-05-29', 5, 142500.00),
(14, 9, '2024-06-19', 3, 85500.00),
(14, 6, '2024-01-01', 5, 142500.00),
(3, 7, '2024-02-23', 3, 25500.00),
(2, 8, '2024-05-20', 1, 62000.00),
(6, 4, '2023-12-09', 5, 16000.00),
(6, 1, '2024-02-28', 1, 3200.00),
(11, 8, '2024-02-22', 1, 450.00),
(1, 1, '2023-11-25', 1, 75000.00),
(2, 6, '2024-01-15', 5, 310000.00),
(7, 8, '2024-01-20', 4, 60000.00),
(11, 8, '2024-03-29', 4, 1800.00),
(4, 4, '2024-03-08', 4, 100000.00),
(1, 1, '2024-06-25', 5, 375000.00),
(15, 9, '2024-01-09', 1, 9800.00),
(6, 5, '2024-06-03', 4, 12800.00),
(1, 2, '2024-03-06', 4, 300000.00),
(5, 1, '2024-03-24', 5, 10500.00),
(14, 8, '2024-04-14', 1, 28500.00),
(15, 3, '2024-05-26', 1, 9800.00),
(8, 2, '2024-03-24', 4, 192000.00),
(13, 10, '2024-03-12', 4, 88000.00),
(14, 6, '2024-03-03', 3, 85500.00),
(1, 7, '2024-01-16', 3, 225000.00),
(10, 4, '2024-06-01', 1, 1500.00),
(12, 10, '2024-01-22', 4, 72000.00),
(8, 5, '2023-11-04', 3, 144000.00),
(14, 4, '2024-05-10', 4, 114000.00),
(4, 9, '2024-05-18', 2, 50000.00),
(11, 6, '2024-04-22', 1, 450.00),
(14, 9, '2024-02-18', 1, 28500.00),
(14, 6, '2024-06-11', 2, 57000.00),
(2, 1, '2024-03-16', 3, 186000.00),
(8, 6, '2023-11-06', 5, 240000.00),
(13, 6, '2024-03-25', 1, 22000.00),
(3, 8, '2024-01-12', 3, 25500.00),
(15, 6, '2023-11-22', 1, 9800.00),
(1, 1, '2024-05-14', 5, 375000.00),
(8, 7, '2023-12-16', 5, 240000.00),
(11, 4, '2024-01-10', 5, 2250.00),
(4, 8, '2024-03-09', 2, 50000.00),
(6, 6, '2024-04-20', 3, 9600.00),
(13, 8, '2024-05-14', 3, 66000.00),
(1, 2, '2024-06-15', 5, 375000.00),
(12, 2, '2024-05-14', 3, 54000.00),
(10, 7, '2023-11-05', 2, 3000.00),
(9, 7, '2024-01-21', 1, 31000.00),
(4, 6, '2024-02-23', 2, 50000.00),
(15, 1, '2024-03-05', 4, 39200.00),
(15, 7, '2024-05-28', 1, 9800.00),
(12, 1, '2024-02-24', 4, 72000.00),
(12, 7, '2023-12-04', 3, 54000.00),
(3, 9, '2024-03-06', 4, 34000.00),
(2, 1, '2024-06-25', 5, 310000.00),
(7, 3, '2024-05-24', 2, 30000.00),
(9, 10, '2024-04-18', 2, 62000.00),
(14, 10, '2024-01-09', 2, 57000.00),
(15, 6, '2024-03-10', 4, 39200.00),
(7, 10, '2024-06-03', 1, 15000.00),
(11, 6, '2024-02-13', 2, 900.00),
(14, 2, '2023-11-19', 4, 114000.00),
(11, 4, '2024-05-08', 5, 2250.00),
(5, 7, '2024-01-21', 5, 10500.00),
(13, 10, '2024-04-06', 5, 110000.00),
(15, 6, '2024-05-21', 4, 39200.00),
(11, 9, '2024-06-18', 1, 450.00),
(10, 10, '2024-02-12', 3, 4500.00),
(10, 1, '2024-03-29', 2, 3000.00),
(7, 7, '2024-04-05', 4, 60000.00),
(15, 4, '2024-06-20', 2, 19600.00),
(1, 4, '2024-01-14', 1, 75000.00),
(5, 8, '2024-01-15', 5, 10500.00),
(3, 4, '2024-01-26', 1, 8500.00),
(13, 2, '2024-06-25', 5, 110000.00),
(9, 10, '2024-03-02', 2, 62000.00),
(1, 10, '2024-02-23', 2, 150000.00),
(12, 10, '2024-06-03', 1, 18000.00),
(13, 3, '2023-11-26', 5, 110000.00),
(8, 1, '2024-05-23', 5, 240000.00),
(15, 9, '2024-05-01', 3, 29400.00),
(9, 7, '2024-05-09', 4, 124000.00),
(2, 6, '2024-02-09', 2, 124000.00),
(11, 4, '2024-02-08', 3, 1350.00),
(6, 4, '2024-02-12', 5, 16000.00),
(14, 5, '2024-01-28', 5, 142500.00),
(10, 6, '2024-05-09', 2, 3000.00),
(1, 2, '2024-03-12', 4, 300000.00),
(9, 9, '2023-11-09', 1, 31000.00),
(5, 3, '2023-12-16', 3, 6300.00),
(2, 9, '2023-11-23', 2, 124000.00),
(6, 8, '2024-02-27', 1, 3200.00),
(1, 3, '2024-05-26', 2, 150000.00),
(7, 4, '2024-05-22', 1, 15000.00),
(11, 5, '2024-01-20', 1, 450.00),
(7, 3, '2023-12-07', 4, 60000.00),
(1, 1, '2024-04-12', 1, 75000.00),
(12, 3, '2024-03-05', 3, 54000.00),
(15, 8, '2024-01-09', 5, 49000.00),
(9, 6, '2024-03-24', 5, 155000.00),
(4, 9, '2024-01-13', 2, 50000.00),
(11, 1, '2024-04-01', 4, 1800.00),
(10, 10, '2024-01-01', 5, 7500.00),
(7, 2, '2024-04-20', 3, 45000.00),
(10, 3, '2024-06-25', 1, 1500.00),
(9, 5, '2024-02-13', 1, 31000.00),
(2, 7, '2024-03-22', 5, 310000.00),
(4, 3, '2024-01-28', 1, 25000.00),
(11, 10, '2024-04-14', 3, 1350.00),
(13, 8, '2024-04-21', 1, 22000.00),
(12, 10, '2023-12-19', 4, 72000.00),
(2, 10, '2023-12-29', 5, 310000.00),
(13, 8, '2024-04-03', 1, 22000.00),
(11, 10, '2024-03-10', 4, 1800.00),
(6, 1, '2024-05-02', 3, 9600.00),
(4, 9, '2024-03-07', 4, 100000.00),
(3, 3, '2024-01-13', 5, 42500.00),
(10, 7, '2024-01-20', 2, 3000.00),
(3, 7, '2024-04-26', 1, 8500.00),
(12, 9, '2023-12-14', 3, 54000.00),
(5, 5, '2024-04-14', 4, 8400.00),
(12, 3, '2024-02-23', 5, 90000.00),
(3, 1, '2024-04-06', 4, 34000.00),
(9, 4, '2023-11-20', 3, 93000.00),
(10, 8, '2024-04-24', 4, 6000.00),
(4, 10, '2024-01-27', 4, 100000.00),
(5, 7, '2024-05-19', 4, 8400.00),
(6, 8, '2023-12-19', 2, 6400.00),
(4, 3, '2023-11-29', 2, 50000.00),
(10, 8, '2024-01-28', 5, 7500.00),
(13, 10, '2024-03-11', 1, 22000.00),
(3, 9, '2024-06-18', 2, 17000.00),
(6, 6, '2024-01-15', 5, 16000.00),
(14, 5, '2024-03-24', 1, 28500.00),
(1, 2, '2024-05-01', 3, 225000.00),
(7, 7, '2024-05-23', 1, 15000.00),
(3, 2, '2024-03-06', 4, 34000.00),
(9, 9, '2024-06-11', 2, 62000.00),
(1, 5, '2024-03-07', 4, 300000.00),
(8, 4, '2024-04-18', 4, 192000.00),
(7, 8, '2024-05-18', 3, 45000.00),
(12, 10, '2024-05-13', 2, 36000.00),
(9, 10, '2023-12-21', 1, 31000.00),
(10, 7, '2024-06-25', 1, 1500.00),
(5, 5, '2024-03-27', 1, 2100.00),
(11, 1, '2024-01-14', 1, 450.00),
(3, 2, '2024-05-05', 3, 25500.00),
(11, 4, '2024-01-09', 2, 900.00),
(12, 5, '2023-11-09', 5, 90000.00),
(4, 10, '2024-02-18', 1, 25000.00),
(13, 1, '2023-11-08', 5, 110000.00),
(2, 2, '2023-12-09', 2, 124000.00),
(6, 7, '2024-05-07', 4, 12800.00),
(5, 2, '2024-01-02', 1, 2100.00),
(7, 6, '2024-03-09', 1, 15000.00),
(1, 8, '2023-12-16', 3, 225000.00),
(6, 1, '2024-01-14', 4, 12800.00),
(4, 8, '2024-04-19', 3, 75000.00),
(8, 1, '2024-05-24', 4, 192000.00),
(11, 6, '2023-11-07', 4, 1800.00),
(15, 6, '2024-02-17', 2, 19600.00),
(5, 9, '2024-02-28', 1, 2100.00),
(13, 8, '2024-02-09', 1, 22000.00),
(9, 1, '2024-01-08', 5, 155000.00);